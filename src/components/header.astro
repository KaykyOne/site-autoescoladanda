---
const links = [
    { titulo: "Início", href: "/#" },
    { titulo: "Serviços", href: "/#servicos" },
    { titulo: "Vantagens", href: "/#vantagens" },
    { titulo: "Sobre", href: "/#sobre" },
    { titulo: "Depoimentos", href: "/#depoimentos" },
    { titulo: "Planos", href: "/planos" },
    { titulo: "Cursos", href: "/cursos" },
];
---

<div class="fixed top-0 w-full flex justify-center z-50">
    <header
        class="flex w-full bg-white backdrop-blur-xl z-40 border justify-center items-center border-white/20 shadow-2xl h-20 transition-all duration-150"
    >
        <div class="px-6 flex items-center w-full justify-between">
            <!-- Logo -->
            <a class="flex items-center gap-3 cursor-pointer" href="/#">
                <img
                    class="h-9 w-9 sm:h-10 sm:w-10"
                    src="/favicon.png"
                    alt="Autoescola Danda Logo"
                />
                <p class="text-lg sm:text-xl font-semibold tracking-tight">
                    Autoescola <span class="text-primary font-bold"
                        >Danda</span
                    >
                </p>
            </a>

            <!-- Desktop Menu -->
            <nav class="hidden xl:flex items-center gap-8 text-sm font-medium">
                {
                    links.map((link) => (
                        <a
                            href={link.href}
                            class="relative group transition-colors"
                        >
                            {link.titulo}
                            <span class="absolute left-0 -bottom-1 w-0 h-[2px] bg-amber-400 transition-all duration-300 group-hover:w-full" />
                        </a>
                    ))
                }
            </nav>

            <!-- CTA -->
            <div class="flex items-center gap-4">
                <a
                    href="/#contato"
                    class="hidden md:flex items-center gap-2 bg-amber-500 hover:bg-amber-600 px-6 py-2.5 rounded-full text-sm font-semibold shadow-lg hover:shadow-amber-500/40 transition-all hover:scale-[1.03]"
                >
                    Contato
                </a>

                <button
                    id="menu-toggle"
                    class="xl:hidden w-11 h-11 flex items-center justify-center rounded-lg hover:bg-white/10 transition"
                >
                    <span class="material-symbols-outlined text-2xl">menu</span>
                </button>
            </div>
        </div>
    </header>
</div>

<!-- Overlay -->
<div
    id="overlay"
    class="fixed md:hidden inset-0 bg-black/40 hidden z-50 backdrop-blur-sm"
>
</div>

<!-- Mobile Drawer -->
<nav
    id="menu-mobile"
    class="fixed md:hidden top-0 right-0 h-full w-72 bg-primary text-white shadow-2xl transform translate-x-full transition-transform duration-300 z-[9999] p-6 flex flex-col gap-6"
>
    <div class="w-full flex justify-end">
        <button
            id="menu-close"
            class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/10 transition"
        >
            <span class="material-symbols-outlined text-2xl">close</span>
        </button>
    </div>
    {
        links.map((link) => (
            <a
                href={link.href}
                class="text-lg font-medium hover:text-amber-400 transition"
            >
                {link.titulo}
            </a>
        ))
    }

    <a
        href="/#contato"
        class="mt-4 bg-amber-500 hover:bg-amber-600 py-3 rounded-full text-center font-semibold transition"
    >
        Contato
    </a>
</nav>

<script>
    const toggle = document.getElementById("menu-toggle");
    const menu = document.getElementById("menu-mobile");
    const overlay = document.getElementById("overlay");

    let lastScrollY = window.scrollY;

    function openMenu() {
        document.body.style.overflow = "hidden";
        menu.classList.remove("translate-x-full");
        overlay.classList.remove("hidden");
    }

    function closeMenu() {
        document.body.style.overflow = "auto";
        menu.classList.add("translate-x-full");
        overlay.classList.add("hidden");
    }

    document.addEventListener("scroll", () => {
        const header = document.querySelector("header");
        if(!header) return;
        if (window.scrollY > lastScrollY) {
            header.classList.remove("h-20");
            header.classList.add("h-0");
            setTimeout(() => {
                header.classList.add("hidden");
            }, 100);
        } else {
            header.classList.remove("hidden");
            header.classList.add("h-20");
            header.classList.remove("h-0");
        }
        lastScrollY = window.scrollY;
    });

    toggle?.addEventListener("click", openMenu);
    overlay?.addEventListener("click", closeMenu);
    document.getElementById("menu-close")?.addEventListener("click", closeMenu);

    menu?.querySelectorAll("a").forEach((link) => {
        link.addEventListener("click", closeMenu);
    });
</script>
